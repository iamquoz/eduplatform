контекст для каждого пользователя
внутри каждой горутины

что-то типа такого на псевдо-го

func HttpApi(something) {
	match something to ("m", userid, "Classes") {
		проверить привелегии
		if привелегии проебались {
			authed[userid] <- скажи этому долбоёб(у|ке), что у не(го|ё) недостаточно прав
		}
		authed[userid] <-= Call of Classes
	}
}

func User(in chan sometype, ctx) {
	ждём когда в c придёт какое-то говно
	пришло? отвечаем, выполняя метод, например. контекст передаём туда, если нужен.
	if err != nil {
		даём пизды юзеру
	}
	возвращаемся на первую строчку
}

func UserPlayer(userid, ctx) channel, err {
	создаём контекст в зависимости от вида пользователя
	добавляем в authed нашего юзерида
	создаём ему там канал
	(хотя, мб контекст и будет содержать этот канал, пока не разобрался)
	go User(authed[userid], контекст)
	если что-то на предыдущих этапах пизданулось, то возвращаем err
}
